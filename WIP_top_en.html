<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XKL20YHCTB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XKL20YHCTB');
    </script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç„¡æ–™ä¸­å­¦è‹±èªã‚¢ãƒ—ãƒªã€å­¦ã‚¢ãƒ—è‹±èªã€‘ï½œè‹±å˜èªãƒ»è‹±æ–‡æ³•ãƒ»ãƒªã‚¹ãƒ‹ãƒ³ã‚°</title>
    <link rel="icon" href="favicon.ico">
    <meta name="description" content="è‹±æ¤œã®å‹‰å¼·ã«ã‚‚å½¹ç«‹ã¤ç„¡æ–™ã®ä¸­å­¦è‹±èªå­¦ç¿’ã‚¢ãƒ—ãƒªã€‚ç´„2000è‹±å˜èª(è‹±æ¤œ3ï½5ç´š)ã‚’å­¦ç¿’ã§ãã‚‹ç™ºéŸ³ä»˜ãã®è‹±å˜èªå¸³ãƒ»è‹±å˜èªãƒ†ã‚¹ãƒˆã€ä¸­å­¦ã®è‹±æ–‡æ³•ã‚’å­¦ç¿’ã§ãã‚‹åŸºæœ¬ä¾‹æ–‡ãƒ»è§£èª¬ãƒ»ä¸¦ã¹æ›¿ãˆç·´ç¿’å•é¡Œã€ç„¡æ–™ã®ãƒªã‚¹ãƒ‹ãƒ³ã‚°ç·´ç¿’å•é¡Œç­‰ã§ä¸­å­¦è‹±èªã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã‚ˆã†ã€‚">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=M+PLUS+Rounded+1c:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <!-- æ—¢å­˜CSS (ã‚µã‚¤ãƒ‰ãƒãƒ¼ç­‰ã®æ©Ÿèƒ½ç¶­æŒç”¨) -->
    <link rel="stylesheet" href="style.css">

    <!-- â–¼â–¼â–¼ ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾© â–¼â–¼â–¼ -->
    <style>
        /* --- Design System --- */
        :root {
            --bg-body: #F8FAFC;
            --bg-surface: #FFFFFF;
            --text-main: #0F172A;
            --text-sub: #64748B;
            --border: #E2E8F0;
            
            /* Color Palette */
            --vocab-color: #3B82F6; /* Blue */
            --grammar-color: #F59E0B; /* Amber */
            --tool-color: #8B5CF6; /* Purple for Tools */
            --danger: #FF006E;
            --success: #10B981;
            
            --g1-accent: #60A5FA;
            --g2-accent: #34D399;
            --g3-accent: #A78BFA;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: 'M PLUS Rounded 1c', sans-serif;
            padding-bottom: 100px; /* ãƒœãƒˆãƒ ãƒŠãƒ“ç”¨ä½™ç™½ */
            touch-action: manipulation; 
        }

        /* Header */
        .app-header {
            background: var(--bg-surface);
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .brand {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .brand i { color: var(--text-main); }
        .brand span { color: var(--vocab-color); }

        /* Hero Selection */
        .hero-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            padding: 24px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .mode-card {
            background: var(--bg-surface);
            border: 2px solid transparent;
            border-radius: 16px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            position: relative;
        }

        .mode-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 20px -5px rgba(0, 0, 0, 0.1);
        }

        .mode-card.active { border-color: currentColor; background: #F0F9FF; }
        .mode-card[data-mode="vocab"].active { background: #EFF6FF; color: var(--vocab-color); }
        .mode-card[data-mode="grammar"].active { background: #FFFBEB; color: var(--grammar-color); }

        .mode-icon { font-size: 2.5rem; }
        .mode-title { font-size: 1.1rem; font-weight: 800; }
        .mode-desc { font-size: 0.75rem; color: var(--text-sub); text-align: center; }

        .check-mark {
            position: absolute; top: 12px; right: 12px;
            font-size: 1.2rem; opacity: 0; transform: scale(0.5);
            transition: all 0.2s;
        }
        .mode-card.active .check-mark { opacity: 1; transform: scale(1); }

        /* Main Container */
        .container {
            max-width: 1000px; margin: 0 auto; padding: 0 24px 24px;
        }

        /* Tabs */
        .tabs {
            display: flex; gap: 8px; margin-bottom: 24px;
            overflow-x: auto; padding-bottom: 4px;
        }
        .tab-btn {
            background: var(--bg-surface); border: 1px solid var(--border);
            color: var(--text-sub); padding: 10px 20px; border-radius: 50px;
            font-weight: 700; font-size: 0.9rem; cursor: pointer;
            white-space: nowrap; transition: all 0.2s;
        }
        .tab-btn.active {
            background: var(--text-main); color: white; border-color: transparent;
        }

        /* Section Header */
        .section-header {
            display: flex; align-items: center; gap: 12px;
            margin-bottom: 20px; margin-top: 10px;
        }
        .grade-title { font-size: 1.5rem; font-weight: 800; margin: 0; }
        .grade-badge {
            font-size: 0.75rem; font-weight: 700; padding: 4px 10px;
            border-radius: 6px; background: #E2E8F0; color: var(--text-sub);
        }

        /* --- Chapter Accordion --- */
        .chapter-section {
            margin-bottom: 24px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 24px;
        }
        .chapter-section:last-child { border-bottom: none; }

        details summary.chapter-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-main);
            cursor: pointer;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            margin-bottom: 10px;
            transition: color 0.2s;
        }
        details summary::-webkit-details-marker { display: none; }
        details summary:hover { color: var(--vocab-color); }
        details[open] summary .toggle-icon { transform: rotate(180deg); }
        .toggle-icon { font-size: 1.2rem; transition: transform 0.2s; }

        /* Grid Layout */
        .grid-wrapper {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
            animation: fadeIn 0.3s ease-out;
            padding-top: 10px;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Unit Card */
        .unit-card {
            background: var(--bg-surface); border-radius: 12px; padding: 20px;
            position: relative; cursor: pointer; transition: all 0.2s;
            border: 1px solid var(--border);
            display: flex; flex-direction: column; justify-content: space-between;
            height: 140px; overflow: hidden;
        }
        .unit-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(0,0,0,0.1);
            border-color: var(--vocab-color);
        }
        .card-deco-number {
            position: absolute; top: -10px; right: -5px;
            font-family: 'Inter', sans-serif; font-size: 5rem;
            font-weight: 900; opacity: 0.05; pointer-events: none;
        }
        .unit-main { position: relative; z-index: 1; }
        .unit-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 4px; line-height: 1.3; }
        .unit-sub { font-size: 0.8rem; color: var(--text-sub); }

        .unit-footer {
            display: flex; gap: 8px; margin-top: 12px; position: relative; z-index: 2;
        }
        .action-chip {
            font-size: 0.75rem; font-weight: 600; padding: 6px 12px;
            border-radius: 6px; display: flex; align-items: center; gap: 4px;
            transition: background 0.2s;
        }
        .btn-learn { background: #F1F5F9; color: var(--text-main); }
        .btn-learn:hover { background: var(--text-main); color: white; }
        .btn-test { background: #F0FDF4; color: #166534; border: 1px solid #DCFCE7; }
        .btn-test:hover { background: #166534; color: white; }

        /* SEO & Footer */
        .seo-section { margin-top: 40px; padding: 0 24px 40px; max-width: 800px; margin: 0 auto; }
        .seo-details { background: #fff; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 20px; }
        .seo-details summary { padding: 15px; font-size: 0.8rem; font-weight: 700; color: var(--text-sub); cursor: pointer; }
        .seo-content { padding: 0 15px 15px; font-size: 0.75rem; color: #666; line-height: 1.6; }
        .copyright { text-align: center; font-size: 0.7rem; color: #ccc; }
        .menutxt { padding-left: 1.5em; margin: 0; }
        .menutxt li { margin-bottom: 8px; }
        .empty-state { text-align: center; padding: 40px; color: var(--text-sub); background: #f8fafc; border-radius: 12px; border: 2px dashed #e2e8f0; }

        /* Bottom Nav*/
        .bottom-nav {
            display: flex; position: fixed; bottom: 30px; left: 50%; 
            transform: translateX(-50%); width: 95%; max-width: 420px;
            background: rgba(255,255,255,0.95); backdrop-filter: blur(10px);
            padding: 10px 16px; justify-content: space-around;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12); 
            border-radius: 50px; border: 1px solid rgba(255,255,255,0.5); z-index: 200;
        }
        .nav-item {
            display: flex; flex-direction: column; align-items: center; gap: 2px;
            color: #94A3B8; text-decoration: none; font-size: 0.7rem; font-weight: 700;
            background: none; border: none; cursor: pointer; padding: 4px 8px;
            transition: color 0.2s; flex: 1;
        }
        .nav-item:hover, .nav-item.active { color: var(--vocab-color); }
        .nav-item i { font-size: 22px; margin-bottom: 2px; }

        /* ã‚¹ãƒãƒ›å¯¾å¿œ */
        @media (max-width: 600px) {
            .bottom-nav {
                bottom: 0; left: 0; transform: none; width: 100%; max-width: 100%;
                border-radius: 20px 20px 0 0; padding: 12px 10px 24px;
                box-shadow: 0 -4px 20px rgba(0,0,0,0.05); border: none; border-top: 1px solid var(--border);
            }
            .app-header { padding: 12px 16px; }
            .hero-selector { grid-template-columns: 1fr; padding: 16px; }
            .mode-card { flex-direction: row; padding: 16px; text-align: left; align-items: center; gap: 16px; }
            .mode-icon { font-size: 2rem; margin-bottom: 0; }
            .mode-desc { text-align: left; font-size: 0.7rem; }
            .container { padding: 0 16px 24px; }
            .grid-wrapper { grid-template-columns: 1fr; }
            .unit-card { height: auto; }
        }
    </style>
</head>
<body data-mode="vocab">

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="app-header">
        <div class="brand">
            <i class="ph-fill ph-book-bookmark"></i>
            GakuApu<span id="brand-suffix">.Vocab</span>
        </div>
        <div id="en-menu-toggle" class="en-menu-toggle">&#9776;</div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Hero Selection -->
        <section class="hero-selector">
            <div class="mode-card active" data-mode="vocab" onclick="setMode('vocab')">
                <div class="check-mark"><i class="ph-bold ph-check-circle"></i></div>
                <div class="mode-icon">ğŸ“–</div>
                <div>
                    <div class="mode-title">è‹±å˜èª</div>
                    <div class="mode-desc">ä¸­å­¦è‹±èªï¼ˆè‹±æ¤œ3ã€œ5ç´šï¼‰ã®é »å‡ºå˜èªã€‚<br>éŸ³å£°ï¼†ãƒ†ã‚¹ãƒˆä»˜ãã€‚</div>
                </div>
            </div>
            <div class="mode-card" data-mode="grammar" onclick="setMode('grammar')">
                <div class="check-mark"><i class="ph-bold ph-check-circle"></i></div>
                <div class="mode-icon">ğŸ“</div>
                <div>
                    <div class="mode-title">è‹±æ–‡æ³•</div>
                    <div class="mode-desc">è§£èª¬ã¨ä¸¦ã¹æ›¿ãˆå•é¡Œã§<br>æ–‡æ³•ã®åŸºç¤ã‚’ãƒã‚¹ã‚¿ãƒ¼ã€‚</div>
                </div>
            </div>
        </section>
        
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" onclick="setGrade(1)">ä¸­1 / è‹±æ¤œ5ç´š</button>
            <button class="tab-btn" onclick="setGrade(2)">ä¸­2 / è‹±æ¤œ4ç´š</button>
            <button class="tab-btn" onclick="setGrade(3)">ä¸­3 / è‹±æ¤œ3ç´š</button>
        </div>

        <!-- Content Area -->
        <div id="content-area">
            <div class="section-header">
                <h2 class="grade-title" id="current-title">ä¸­å­¦1å¹´ç”Ÿ</h2>
                <span class="grade-badge" id="current-badge">è‹±æ¤œ5ç´š</span>
            </div>
            <div id="chapter-container"></div>
        </div>

        <!-- SEO & Disclaimer -->
        <section class="seo-section">
            <details class="seo-details">
                <summary>ã”åˆ©ç”¨ä¸Šã®æ³¨æ„ãƒ»å…è²¬äº‹é …</summary>
                <div class="seo-content">
                    <ul class="menutxt">
                        <li>å½“ã‚µã‚¤ãƒˆã§ã¯ã€å½“ã‚µã‚¤ãƒˆã§æä¾›ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã§ãã‚‹ã ã‘æ­£ã—ã„æƒ…å ±ã¨ãªã‚‹ã‚ˆã†ã«åŠªã‚ã¦ãŠã‚Šã¾ã™ãŒã€ãã®æ­£ç¢ºæ€§ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã”ã–ã„ã¾ã›ã‚“ã€‚ã¾ãŸã€å½“ã‚µã‚¤ãƒˆã§æä¾›ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ã€äºˆå‘Šãªãå¤‰æ›´ã•ã›ã¦é ‚ãã“ã¨ãŒã”ã–ã„ã¾ã™ã€‚</li>
                        <li>å½“ã‚µã‚¤ãƒˆã§æä¾›ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã‚ˆã‚Šç›´æ¥çš„ãƒ»é–“æ¥çš„ã‚’å•ã‚ãšã„ã‹ãªã‚‹è¢«å®³ãŒç™ºç”Ÿã—ãŸã¨ã—ã¦ã‚‚ã€å½“ã‚µã‚¤ãƒˆã§ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã‚ãªã„ã‚‚ã®ã¨è‡´ã—ã¾ã™ã€‚</li>
                        <li>å½“ã‚µã‚¤ãƒˆã¯ã€ã‚µã‚¤ãƒˆã®ç¶­æŒãƒ»é‹å–¶ã®ãŸã‚ã€Amazonã®ã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆã¨ã—ã¦é©æ ¼è²©å£²ã«ã‚ˆã‚Šåå…¥ã‚’å¾—ã¦ã„ã¾ã™ã€‚</li>    
                    </ul>
                </div>
            </details>
            <p class="copyright">Â© 2024 GakuApu English</p>
        </section>
    </main>

    <!-- Bottom Nav (ãƒ„ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³) -->
    <nav class="bottom-nav">
        <button class="nav-item" onclick="alert('æº–å‚™ä¸­ã§ã™')">
            <i class="ph-bold ph-heart"></i>
            <span>Myå˜èªå¸³</span>
        </button>
        <button class="nav-item" onclick="location.href='WIP_mylistening_library.html'">
            <i class="ph-bold ph-speaker-high"></i>
            <span>Myãƒªã‚¹ãƒ‹ãƒ³ã‚°</span>
        </button>
        <button class="nav-item" onclick="alert('æº–å‚™ä¸­ã§ã™')">
            <i class="ph-bold ph-chart-bar"></i>
            <span>è¨˜éŒ²</span>
        </button>
    </nav>

    <!-- Sidebar Container -->
    <div id="en-sidebar-container" class="en-sidebar-container"></div>

    <!-- Scripts -->
    <script src="sidebar_en.js"></script>
    <!-- <script src="menu_en.js"></script> -->

    <script>
        // State
        let currentMode = 'vocab';
        let currentGrade = 1;

        // Data Definition
        const VOCAB_DATA = {
            1: [ 
                { 
                    chapterName: "Chapter 1:", 
                    items: [
                        { id: 1, title: "Chapter1-1", sub: "" },
                        { id: 2, title: "Chapter1-2", sub: "" },
                        { id: 3, title: "Chapter1-3", sub: "" },
                        { id: 4, title: "Chapter1-4", sub: "" },
                        { id: 5, title: "Chapter1-5", sub: "" },
                        { id: 6, title: "Chapter1-6", sub: "" },
                        { id: 7, title: "Chapter1-7", sub: "" },
                        { id: 8, title: "Chapter1-8", sub: "" },
                        { id: 9, title: "Chapter1-9", sub: "" },
                        { id: 10, title: "Chapter1-10", sub: "" }
                    ]
                },
                { 
                    chapterName: "Chapter 2:", 
                    items: [
                        { id: 11, title: "Chapter2-1", sub: "" },
                        { id: 12, title: "Chapter2-2", sub: "" },
                        { id: 13, title: "Chapter2-3", sub: "" },
                        { id: 14, title: "Chapter2-4", sub: "" },
                        { id: 15, title: "Chapter2-5", sub: "" },
                        { id: 16, title: "Chapter2-6", sub: "" },
                        { id: 17, title: "Chapter2-7", sub: "" },
                        { id: 18, title: "Chapter2-8", sub: "" },
                        { id: 19, title: "Chapter2-9", sub: "" },
                        { id: 20, title: "Chapter2-10", sub: "" }
                    ]
                },
                {
                    chapterName: "Chapter 3:",
                    items: [
                        { id: 21, title: "Chapter3-1", sub: "" },
                        { id: 22, title: "Chapter3-2", sub: "" },
                        { id: 23, title: "Chapter3-3", sub: "" },
                        { id: 24, title: "Chapter3-4", sub: "" },
                        { id: 25, title: "Chapter3-5", sub: "" },
                        { id: 26, title: "Chapter3-6", sub: "" },
                        { id: 27, title: "Chapter3-7", sub: "" },
                        { id: 28, title: "Chapter3-8", sub: "" },
                        { id: 29, title: "Chapter3-9", sub: "" },
                        { id: 30, title: "Chapter3-10", sub: "" }
                    ]
                }
            ],
            2: [ 
                { 
                    chapterName: "Chapter 1:", 
                    items: [
                        { id: 1, title: "Chapter1-1", sub: "" },
                        { id: 2, title: "Chapter1-2", sub: "" },
                        { id: 3, title: "Chapter1-3", sub: "" },
                        { id: 4, title: "Chapter1-4", sub: "" },
                        { id: 5, title: "Chapter1-5", sub: "" },
                        { id: 6, title: "Chapter1-6", sub: "" },
                        { id: 7, title: "Chapter1-7", sub: "" },
                        { id: 8, title: "Chapter1-8", sub: "" },
                        { id: 9, title: "Chapter1-9", sub: "" },
                        { id: 10, title: "Chapter1-10", sub: "" }
                    ]
                },
                { 
                    chapterName: "Chapter 2:", 
                    items: [
                        { id: 11, title: "Chapter2-1", sub: "" },
                        { id: 12, title: "Chapter2-2", sub: "" },
                        { id: 13, title: "Chapter2-3", sub: "" },
                        { id: 14, title: "Chapter2-4", sub: "" },
                        { id: 15, title: "Chapter2-5", sub: "" },
                        { id: 16, title: "Chapter2-6", sub: "" },
                        { id: 17, title: "Chapter2-7", sub: "" },
                        { id: 18, title: "Chapter2-8", sub: "" },
                        { id: 19, title: "Chapter2-9", sub: "" },
                        { id: 20, title: "Chapter2-10", sub: "" }
                    ]
                },
                {
                    chapterName: "Chapter 3:",
                    items: [
                        { id: 21, title: "Chapter3-1", sub: "" },
                        { id: 22, title: "Chapter3-2", sub: "" },
                        { id: 23, title: "Chapter3-3", sub: "" },
                        { id: 24, title: "Chapter3-4", sub: "" },
                        { id: 25, title: "Chapter3-5", sub: "" },
                        { id: 26, title: "Chapter3-6", sub: "" },
                        { id: 27, title: "Chapter3-7", sub: "" },
                        { id: 28, title: "Chapter3-8", sub: "" },
                        { id: 29, title: "Chapter3-9", sub: "" },
                        { id: 30, title: "Chapter3-10", sub: "" }
                    ]
                }
            ],
            3: [
                { 
                    chapterName: "Chapter 1:", 
                    items: [
                        { id: 1, title: "Chapter1-1", sub: "" },
                        { id: 2, title: "Chapter1-2", sub: "" },
                        { id: 3, title: "Chapter1-3", sub: "" },
                        { id: 4, title: "Chapter1-4", sub: "" },
                        { id: 5, title: "Chapter1-5", sub: "" },
                        { id: 6, title: "Chapter1-6", sub: "" },
                        { id: 7, title: "Chapter1-7", sub: "" },
                        { id: 8, title: "Chapter1-8", sub: "" },
                        { id: 9, title: "Chapter1-9", sub: "" },
                        { id: 10, title: "Chapter1-10", sub: "" }
                    ]
                },
                { 
                    chapterName: "Chapter 2:", 
                    items: [
                        { id: 11, title: "Chapter2-1", sub: "" },
                        { id: 12, title: "Chapter2-2", sub: "" },
                        { id: 13, title: "Chapter2-3", sub: "" },
                        { id: 14, title: "Chapter2-4", sub: "" },
                        { id: 15, title: "Chapter2-5", sub: "" },
                        { id: 16, title: "Chapter2-6", sub: "" },
                        { id: 17, title: "Chapter2-7", sub: "" },
                        { id: 18, title: "Chapter2-8", sub: "" },
                        { id: 19, title: "Chapter2-9", sub: "" },
                        { id: 20, title: "Chapter2-10", sub: "" }
                    ]
                },
                {
                    chapterName: "Chapter 3:",
                    items: [
                        { id: 21, title: "Chapter3-1", sub: "" },
                        { id: 22, title: "Chapter3-2", sub: "" },
                        { id: 23, title: "Chapter3-3", sub: "" },
                        { id: 24, title: "Chapter3-4", sub: "" },
                        { id: 25, title: "Chapter3-5", sub: "" },
                        { id: 26, title: "Chapter3-6", sub: "" },
                        { id: 27, title: "Chapter3-7", sub: "" },
                        { id: 28, title: "Chapter3-8", sub: "" },
                        { id: 29, title: "Chapter3-9", sub: "" },
                        { id: 30, title: "Chapter3-10", sub: "" }
                    ]
                },
                                {
                    chapterName: "Chapter 4:",
                    items: [
                        { id: 31, title: "Chapter3-1", sub: "" },
                        { id: 32, title: "Chapter3-2", sub: "" },
                        { id: 33, title: "Chapter3-3", sub: "" },
                        { id: 34, title: "Chapter3-4", sub: "" },
                        { id: 35, title: "Chapter3-5", sub: "" },
                        { id: 36, title: "Chapter3-6", sub: "" },
                        { id: 37, title: "Chapter3-7", sub: "" }
                    ]
                }
            ]
        };

        const GRAMMAR_DATA = {
            1: [
                {
                    chapterName: "",
                    items: [
                        { id: 1, title: "beå‹•è©ã®æ–‡æ³•", sub: "è‚¯å®šãƒ»å¦å®šãƒ»ç–‘å•" },
                        { id: 2, title: "ä¸€èˆ¬å‹•è©ã®æ–‡æ³•", sub: "do / does" }
                    ]
                }
            ]
        };

        // Logic
        function setMode(mode) {
            currentMode = mode;
            document.body.setAttribute('data-mode', mode);
            document.querySelectorAll('.mode-card').forEach(card => {
                if(card.dataset.mode === mode) card.classList.add('active');
                else card.classList.remove('active');
            });
            const suffix = document.getElementById('brand-suffix');
            suffix.innerText = mode === 'vocab' ? '.Vocab' : '.Grammar';
            suffix.style.color = mode === 'vocab' ? 'var(--vocab-color)' : 'var(--grammar-color)';
            renderContent();
        }

        function setGrade(grade) {
            currentGrade = grade;
            document.querySelectorAll('.tab-btn').forEach((btn, idx) => {
                if(idx + 1 === grade) btn.classList.add('active');
                else btn.classList.remove('active');
            });
            const titleEl = document.getElementById('current-title');
            const badgeEl = document.getElementById('current-badge');
            if(grade === 1) { titleEl.innerText = "ä¸­å­¦1å¹´ç”Ÿ"; badgeEl.innerText = "è‹±æ¤œ5ç´š"; }
            else if(grade === 2) { titleEl.innerText = "ä¸­å­¦2å¹´ç”Ÿ"; badgeEl.innerText = "è‹±æ¤œ4ç´š"; }
            else { titleEl.innerText = "ä¸­å­¦3å¹´ç”Ÿ"; badgeEl.innerText = "è‹±æ¤œ3ç´š"; }
            renderContent();
        }

        function renderContent() {
            const container = document.getElementById('chapter-container');
            container.innerHTML = ''; 
            const dataSource = currentMode === 'vocab' ? VOCAB_DATA : GRAMMAR_DATA;
            const chapters = dataSource[currentGrade] || [];

            if(chapters.length === 0) {
                container.innerHTML = `<div class="empty-state"><i class="ph-bold ph-pencil-slash" style="font-size:2rem; margin-bottom:10px;"></i><p>æº–å‚™ä¸­ã§ã™ã€‚</p></div>`;
                return;
            }

            chapters.forEach((chapter, index) => {
                const section = document.createElement('div');
                section.className = 'chapter-section';
                const isOpen = index === 0 ? 'open' : '';
                let gridHtml = '';
                const gradeCode = currentGrade * 11;
                const filePrefix = currentMode === 'vocab' ? 'en' : 'gr';

                chapter.items.forEach(item => {
                    const learnLink = `${filePrefix}${currentGrade}${Math.ceil(item.id / 10)}_${(item.id % 10) || 10}.html`;
                    const testLink = `${filePrefix}${currentGrade}${Math.ceil(item.id / 10)}_${(item.id % 10) || 10}t.html`;

                    gridHtml += `
                    <div class="unit-card" onclick="location.href='${learnLink}'">
                        <div class="card-deco-number">${String(item.id).padStart(2, '0')}</div>
                        <div class="unit-main">
                            <div class="unit-title">${item.title}</div>
                            <div class="unit-sub">${item.sub}</div>
                        </div>
                        <div class="unit-footer">
                            <span class="action-chip btn-learn"><i class="ph-bold ph-book-open"></i> å˜èªå¸³</span>
                            <span class="action-chip btn-test" onclick="event.stopPropagation(); location.href='${testLink}'"><i class="ph-bold ph-pencil-simple"></i> ãƒ†ã‚¹ãƒˆ</span>
                        </div>
                    </div>`;
                });

                section.innerHTML = `<details ${isOpen}><summary class="chapter-title">${chapter.chapterName}<span class="toggle-icon"><i class="ph-bold ph-caret-down"></i></span></summary><div class="grid-wrapper">${gridHtml}</div></details>`;
                container.appendChild(section);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            setMode('vocab');
            setGrade(1);
        });
    </script>
</body>
</html>